/*********************************************************************************/
/********** THIS FILE IS GENERATED BY TOUCHGFX DESIGNER, DO NOT MODIFY ***********/
/*********************************************************************************/
#include <gui_generated/mainscreen_screen/MainScreenViewBase.hpp>
#include "BitmapDatabase.hpp"
#include <texts/TextKeysAndLanguages.hpp>
#include <touchgfx/Color.hpp>

MainScreenViewBase::MainScreenViewBase() :
    interaction1Counter(0),
    interaction3Counter(0),
    interaction2EndedCallback(this, &MainScreenViewBase::interaction2EndedCallbackHandler)
{

    MainBkgImage.setBitmap(touchgfx::Bitmap(BITMAP_BLUE_TEXTURES_VERTICAL_CLOTH_ID));
    MainBkgImage.setPosition(0, 0, 800, 480);
    MainBkgImage.setOffset(0, 0);

    HelloText.setXY(0, -49);
    HelloText.setColor(touchgfx::Color::getColorFrom24BitRGB(255, 255, 255));
    HelloText.setLinespacing(0);
    HelloText.setTypedText(touchgfx::TypedText(T_SINGLEUSEID1));

    add(MainBkgImage);
    add(HelloText);
}

void MainScreenViewBase::setupScreen()
{

}

//Handles delays
void MainScreenViewBase::handleTickEvent()
{
    if(interaction1Counter > 0)
    {
        interaction1Counter--;
        if(interaction1Counter == 0)
        {
            //Interaction2
            //When Interaction1 completed move HelloText
            //Move HelloText to x:199, y:216 with BounceOut easing in 3000 ms (180 Ticks)
            HelloText.clearMoveAnimationEndedAction();
            HelloText.startMoveAnimation(199, 216, 180, touchgfx::EasingEquations::bounceEaseOut, touchgfx::EasingEquations::bounceEaseOut);
            HelloText.setMoveAnimationEndedAction(interaction2EndedCallback);
        }
    }
    if(interaction3Counter > 0)
    {
        interaction3Counter--;
        if(interaction3Counter == 0)
        {
            //Interaction4
            //When Interaction3 completed change screen to MainScreen
            //Go to MainScreen with screen transition towards East
            application().gotoMainScreenScreenSlideTransitionEast();
        }
    }
}

//Called when the screen is done with transition/load
void MainScreenViewBase::afterTransition()
{
    //Interaction1
    //When screen is entered delay
    //Delay for 1000 ms (60 Ticks)
    interaction1Counter = INTERACTION1_DURATION;
}

void MainScreenViewBase::interaction2EndedCallbackHandler(const touchgfx::MoveAnimator<touchgfx::TextArea>& comp)
{
    //Interaction3
    //When Interaction2 completed delay
    //Delay for 500 ms (30 Ticks)
    interaction3Counter = INTERACTION3_DURATION;
}
